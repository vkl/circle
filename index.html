<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rolling Circle Visualization</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    canvas {
      border: 1px solid #000;
      border-radius: 16px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .controls {
      margin-top: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .inputs {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    input {
      padding: 5px;
      font-size: 16px;
      width: 150px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="inputs">
    <label>
      Radius A (px):
      <input type="number" id="radiusAInput" value="50" min="1">
    </label>
    <label>
      Radius B (px):
      <input type="number" id="radiusBInput" value="150" min="1">
    </label>
  </div>
  
  <canvas id="canvas" width="800" height="800"></canvas>
  <div class="controls">
    <button id="toggleButton">Start Rolling</button>
    <p id="rotationCount">Rotations: 0</p>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const toggleButton = document.getElementById('toggleButton');
    const rotationCountDisplay = document.getElementById('rotationCount');
    const radiusAInput = document.getElementById('radiusAInput');
    const radiusBInput = document.getElementById('radiusBInput');


    //const radiusA = 50; // 1 unit = 50px
    //const radiusB = 150; // 3 units = 150px
    let radiusA = parseInt(radiusAInput.value, 10);
    let radiusB = parseInt(radiusBInput.value, 10);
    
    const centerX = 400;
    const centerY = 400;
    let angle = 0;
    let rotationAngle = 0;
    let rotationCount = 0;
    let isRolling = false;
    let interval;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw Circle B
      ctx.beginPath();
      ctx.arc(centerX, centerY, radiusB, 0, 2 * Math.PI);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Draw mark on Circle B
      const markBX = centerX - radiusB;
      const markBY = centerY;
      ctx.beginPath();
      ctx.arc(markBX, markBY, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#00ff00';
      ctx.fill();

      // Calculate Circle A position on the outside of Circle B
      const xA = centerX - (radiusB + radiusA) * Math.cos(angle);
      const yA = centerY - (radiusB + radiusA) * Math.sin(angle);

      // Draw Circle A
      ctx.beginPath();
      ctx.arc(xA, yA, radiusA, 0, 2 * Math.PI);
      ctx.strokeStyle = '#007bff';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Draw mark on Circle A
      const markX = xA + radiusA * Math.cos(rotationAngle);
      const markY = yA + radiusA * Math.sin(rotationAngle);
      ctx.beginPath();
      ctx.arc(markX, markY, 5, 0, 2 * Math.PI);
      ctx.fillStyle = '#ff0000';
      ctx.fill();
    }

    function startRolling() {
      interval = setInterval(() => {
        angle += 0.02;
        rotationAngle += 0.02 * (radiusB / radiusA + 1); // Adjust rotation speed based on radius
        draw();

        if (rotationAngle >= 2 * Math.PI) {
          rotationAngle -= 2 * Math.PI;
          rotationCount++;
          rotationCountDisplay.textContent = `Rotations: ${rotationCount}`;
        }
      }, 50);
    }

    function stopRolling() {
      clearInterval(interval);
    }

    radiusAInput.addEventListener('input', () => {
      radiusA = parseInt(radiusAInput.value, 10) || 1;
      draw();
    });

    radiusBInput.addEventListener('input', () => {
      radiusB = parseInt(radiusBInput.value, 10) || 1;
      draw();
    });

    toggleButton.addEventListener('click', () => {
      isRolling = !isRolling;
      if (isRolling) {
        toggleButton.textContent = 'Stop Rolling';
        startRolling();
      } else {
        toggleButton.textContent = 'Start Rolling';
        stopRolling();
      }
    });

    draw(); // Initial draw
  </script>
</body>
</html>
